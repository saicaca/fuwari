/* Content styles for Typst HTML output (scoped to .typst-content) */

.typst-content h1 {
  @apply text-3xl;
}

.typst-content h1 .anchor,
.typst-content h2 .anchor,
.typst-content h3 .anchor,
.typst-content h4 .anchor,
.typst-content h5 .anchor,
.typst-content h6 .anchor {
  @apply transition -m-0.5 ml-[0.2ch] p-0.5 select-none opacity-0 no-underline !important;
}

.typst-content h1 .anchor .anchor-icon,
.typst-content h2 .anchor .anchor-icon,
.typst-content h3 .anchor .anchor-icon,
.typst-content h4 .anchor .anchor-icon,
.typst-content h5 .anchor .anchor-icon,
.typst-content h6 .anchor .anchor-icon {
  @apply mx-[0.45ch] !important;
}

.typst-content h1:hover .anchor,
.typst-content h2:hover .anchor,
.typst-content h3:hover .anchor,
.typst-content h4:hover .anchor,
.typst-content h5:hover .anchor,
.typst-content h6:hover .anchor {
  @apply opacity-100 !important;
}

.typst-content a:not(.no-styling) {
  /* Tailwind's `link` class may not exist depending on config; inline the essentials */
  @apply relative bg-none font-medium text-[var(--primary)] underline decoration-[var(--link-underline)] decoration-1 decoration-dashed underline-offset-4;
  box-decoration-break: clone;
  -webkit-box-decoration-break: clone;
  display: inline-block;
}

.typst-content a:not(.no-styling):hover,
.typst-content a:not(.no-styling):active {
  @apply decoration-transparent;
  background: var(--btn-plain-bg-hover);
  border-bottom: 1px dashed var(--link-hover);
  text-decoration: none;
}

.typst-content code {
  @apply bg-[var(--inline-code-bg)] text-[var(--inline-code-color)] px-1 py-0.5 rounded-md overflow-hidden;
  font-family: var(--mono-font);
  counter-reset: line;
}

.typst-content code:before { content: none; }
.typst-content code:after { content: none; }

.typst-content code span.line:before {
  @apply text-white/25 mr-4 w-4 inline-block;
  content: counter(line);
  counter-increment: line;
  direction: rtl;
}

.typst-content code span.line:last-child:empty,
.typst-content code span.line:last-child:has(> span:empty:only-child) {
  display: none;
}

.typst-content .copy-btn {
  all: initial;
  /* Remove dependency on a custom Tailwind class to avoid build failures */
  @apply opacity-0 shadow-lg shadow-black/50 absolute active:scale-90 h-8 w-8 top-3 right-3 text-sm transition-all ease-in-out z-20 cursor-pointer bg-[var(--btn-regular-bg)] text-[var(--btn-content)];
  border-radius: var(--radius-md);
}

.typst-content .frame:hover .copy-btn { opacity: 1; }

.typst-content .copy-btn-icon {
  @apply absolute top-1/2 left-1/2 transition -translate-x-1/2 -translate-y-1/2 w-4 h-4 fill-white pointer-events-none;
}
.typst-content .copy-btn .copy-icon { @apply opacity-100 fill-white dark:fill-white/75; }
.typst-content .copy-btn.success .copy-icon { @apply opacity-0 fill-[var(--deep-text)]; }
.typst-content .copy-btn .success-icon { @apply opacity-0 fill-white; }
.typst-content .copy-btn.success .success-icon { @apply opacity-100; }

.typst-content .expressive-code { @apply my-4; }
.typst-content .expressive-code ::selection { @apply bg-[var(--codeblock-selection)]; }

/* Removed legacy EC fallback (.ec-standalone) â€” now using Expressive Code engine */

.typst-content ul li::marker,
.typst-content ol li::marker { @apply text-[var(--primary)]; }

.typst-content blockquote {
  @apply not-italic border-transparent relative;
  font-weight: inherit;
}

.typst-content blockquote:before {
  @apply content-[""] absolute -left-1 block transition bg-[var(--btn-regular-bg)] h-full w-1 rounded-full;
}

/* Remove the double quotes from default styles */
.typst-content blockquote p:before,
.typst-content blockquote p:after { @apply content-none; }

/* Images in content are zoomable via PhotoSwipe */
.typst-content img,
#post-cover img {
  @apply cursor-zoom-in;
  border-radius: var(--radius-lg);
}

/* Media embeds: add a theme-colored border around videos/iframes */
.typst-content iframe,
.typst-content video {
  display: block;
  max-width: 100%;
  margin-left: auto;
  margin-right: auto;
  border-radius: var(--radius-lg);
  border: 2px solid var(--primary);
}

/* Admonitions & content extras (moved from content-extend.css) */

/* Admonition blocks */
/* Base: use a single CSS variable for color and let variants only set it. */
.typst-content blockquote.admonition { --adm-color: var(--admonitions-color-note); }
.typst-content blockquote.admonition .bdm-title {
  display: flex;
  align-items: center;
  margin-bottom: -0.9rem;
  font-weight: bold;
  color: var(--adm-color);
}
.typst-content blockquote.admonition .bdm-title:before {
  content: ' ';
  display: inline-block;
  font-size: inherit;
  overflow: visible;
  margin-right: 0.6rem;
  height: 1em;
  width: 1em;
  vertical-align: -0.126em;
  mask-size: contain;
  mask-position: center;
  mask-repeat: no-repeat;
  transform: translateY(-0.0625rem);
  background: var(--adm-color);
}

.typst-content blockquote.admonition.bdm-tip { --adm-color: var(--admonitions-color-tip); }
.typst-content blockquote.admonition.bdm-tip .bdm-title:before { mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' version='1.1' width='16' height='16' aria-hidden='true'%3E%3Cpath d='M8 1.5c-2.363 0-4 1.69-4 3.75 0 .984.424 1.625.984 2.304l.214.253c.223.264.47.556.673.848.284.411.537.896.621 1.49a.75.75 0 0 1-1.484.211c-.04-.282-.163-.547-.37-.847a8.456 8.456 0 0 0-.542-.68c-.084-.1-.173-.205-.268-.32C3.201 7.75 2.5 6.766 2.5 5.25 2.5 2.31 4.863 0 8 0s5.5 2.31 5.5 5.25c0 1.516-.701 2.5-1.328 3.259-.095.115-.184.22-.268.319-.207.245-.383.453-.541.681-.208.3-.33.565-.37.847a.751.751 0 0 1-1.485-.212c.084-.593.337-1.078.621-1.489.203-.292.45-.584.673-.848.075-.088.147-.173.213-.253.561-.679.985-1.32.985-2.304 0-2.06-1.637-3.75-4-3.75ZM5.75 12h4.5a.75.75 0 0 1 0 1.5h-4.5a.75.75 0 0 1 0-1.5ZM6 15.25a.75.75 0 0 1 .75-.75h2.5a.75.75 0 0 1 0 1.5h-2.5a.75.75 0 0 1-.75-.75Z'%3E%3C/path%3E%3C/svg%3E"); }
.typst-content blockquote.admonition.bdm-tip:before { background: var(--adm-color); }

.typst-content blockquote.admonition.bdm-note { --adm-color: var(--admonitions-color-note); }
.typst-content blockquote.admonition.bdm-note .bdm-title:before { mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' version='1.1' width='16' height='16' aria-hidden='true'%3E%3Cpath fill='var(--admonitions-color-tip)' d='M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z'%3E%3C/path%3E%3C/svg%3E"); }
.typst-content blockquote.admonition.bdm-note:before { background: var(--adm-color); }

.typst-content blockquote.admonition.bdm-important { --adm-color: var(--admonitions-color-important); }
.typst-content blockquote.admonition.bdm-important .bdm-title:before { mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' version='1.1' width='16' height='16' aria-hidden='true'%3E%3Cpath d='M0 1.75C0 .784.784 0 1.75 0h12.5C15.216 0 16 .784 16 1.75v9.5A1.75 1.75 0 0 1 14.25 13H8.06l-2.573 2.573A1.458 1.458 0 0 1 3 14.543V13H1.75A1.75 1.75 0 0 1 0 11.25Zm1.75-.25a.25.25 0 0 0-.25.25v9.5c0 .138.112.25.25.25h2a.75.75 0 0 1 .75.75v2.19l2.72-2.72a.749.749 0 0 1 .53-.22h6.5a.25.25 0 0 0 .25-.25v-9.5a.25.25 0 0 0-.25-.25Zm7 2.25v2.5a.75.75 0 0 1-1.5 0v-2.5a.75.75 0 0 1 1.5 0ZM9 9a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z'%3E%3C/path%3E%3C/svg%3E"); }
.typst-content blockquote.admonition.bdm-important:before { background: var(--adm-color); }

.typst-content blockquote.admonition.bdm-warning { --adm-color: var(--admonitions-color-warning); }
.typst-content blockquote.admonition.bdm-warning .bdm-title:before { mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' version='1.1' width='16' height='16' aria-hidden='true'%3E%3Cpath d='M6.457 1.047c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0 1 14.082 15H1.918a1.75 1.75 0 0 1-1.543-2.575Zm1.763.707a.25.25 0 0 0-.44 0L1.698 13.132a.25.25 0 0 0 .22.368h12.164a.25.25 0 0 0 .22-.368Zm.53 3.996v2.5a.75.75 0 0 1-1.5 0v-2.5a.75.75 0 0 1 1.5 0ZM9 11a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z'%3E%3C/path%3E%3C/svg%3E"); }
.typst-content blockquote.admonition.bdm-warning:before { background: var(--adm-color); }

.typst-content blockquote.admonition.bdm-caution { --adm-color: var(--admonitions-color-caution); }
.typst-content blockquote.admonition.bdm-caution .bdm-title:before { mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' version='1.1' width='16' height='16' aria-hidden='true'%3E%3Cpath d='M4.47.22A.749.749 0 0 1 5 0h6c.199 0 .389.079.53.22l4.25 4.25c.141.14.22.331.22.53v6a.749.749 0 0 1-.22.53l-4.25 4.25A.749.749 0 0 1 11 16H5a.749.749 0 0 1-.53-.22L.22 11.53A.749.749 0 0 1 0 11V5c0-.199.079-.389.22-.53Zm.84 1.28L1.5 5.31v5.38l3.81 3.81h5.38l3.81-3.81V5.31L10.69 1.5ZM8 4a.75.75 0 0 1 .75.75v3.5a.75.75 0 0 1-1.5 0v-3.5A.75.75 0 0 1 8 4Zm0 8a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z'%3E%3C/path%3E%3C/svg%3E"); }
.typst-content blockquote.admonition.bdm-caution:before { background: var(--adm-color); }

/* Spoiler component inside Typst HTML content */
.typst-content spoiler { @apply bg-[var(--codeblock-bg)] hover:bg-transparent px-1 py-0.5 overflow-hidden rounded-md transition-all duration-150; }
.typst-content spoiler:not(:hover) { color: var(--codeblock-bg); }
.typst-content spoiler:not(:hover) * { color: var(--codeblock-bg); }

/* GitHub Card (rendered by ::github directive) */
.typst-content a.card-github {
  display: block;
  position: relative;
  margin: .5rem 0;
  background: var(--license-block-bg);
  border: 2px solid var(--primary);
  border-radius: var(--radius-large);
  padding: 1.1rem 1.5rem;
  color: var(--tw-prose-body, inherit);
  text-decoration: none;
}
.typst-content a.card-github:hover { background: var(--btn-regular-bg-hover); }
/* Hover color tweaks to match original */
.typst-content a.card-github:hover .gc-titlebar { color: var(--btn-content); }
.typst-content a.card-github:hover .gc-stars,
.typst-content a.card-github:hover .gc-forks,
.typst-content a.card-github:hover .gc-license,
.typst-content a.card-github:hover .gc-description { color: var(--tw-prose-headings, inherit); }
.typst-content .gc-titlebar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: .5rem;
  /* Always show accent color (theme) even when not hovered */
  color: var(--btn-content);
  font-size: 1.25rem;
  font-weight: 500;
}
.typst-content .gc-titlebar-left { display: flex; align-items: center; gap: .5rem; }
.typst-content .gc-owner { display: flex; align-items: center; gap: .5rem; }
.typst-content .gc-avatar {
  display: block;
  overflow: hidden;
  width: 1.5rem; height: 1.5rem;
  margin-top: -0.1rem;
  border-radius: 50%;
  background: var(--primary);
  background-position: center; background-size: cover;
}
.typst-content .gc-user { opacity: .8; }
.typst-content .gc-divider { margin: 0 .25rem; opacity: .5; }
.typst-content .gc-repo { font-weight: 700; }
.typst-content .gc-description { margin: 0 0 .7rem; font-size: 1rem; font-weight: 300; line-height: 1.5rem; color: var(--tw-prose-body, inherit); }
.typst-content .gc-infobar { display: flex; gap: 1.5rem; align-items: center; color: var(--tw-prose-body, inherit); width: fit-content; }
.typst-content .gc-stars,
.typst-content .gc-forks,
.typst-content .gc-license,
.typst-content .gc-language { font-weight: 500; opacity: .9; position: relative; padding-left: 1.25rem; font-size: .875rem; }
/* icons inherit the current text color */
.typst-content .gc-stars:before,
.typst-content .gc-forks:before,
.typst-content .gc-license:before { content:""; position:absolute; left:0; top:50%; width:1rem; height:1rem; transform:translateY(-50%); background-color: currentColor; mask-size: contain; mask-position: center; mask-repeat: no-repeat; }
.typst-content .gc-stars:before { mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' aria-hidden='true' height='16' viewBox='0 0 16 16' version='1.1' width='16'%3E%3Cpath d='M8 .25a.75.75 0 0 1 .673.418l1.882 3.815 4.21.612a.75.75 0 0 1 .416 1.279l-3.046 2.97.719 4.192a.751.751 0 0 1-1.088.791L8 12.347l-3.766 1.98a.75.75 0 0 1-1.088-.79l.72-4.194L.818 6.374a.75.75 0 0 1 .416-1.28l4.21-.611L7.327.668A.75.75 0 0 1 8 .25Zm0 2.445L6.615 5.5a.75.75 0 0 1-.564.41l-3.097.45 2.24 2.184a.75.75 0 0 1 .216.664l-.528 3.084 2.769-1.456a.75.75 0 0 1 .698 0l2.77 1.456-.53-3.084a.75.75 0 0 1 .216-.664l2.24-2.183-3.096-.45a.75.75 0 0 1-.564-.41L8 2.694Z'%3E%3C/path%3E%3C/svg%3E"); }
.typst-content .gc-license:before { mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' aria-hidden='true' height='16' viewBox='0 0 16 16' version='1.1' width='16'%3E%3Cpath d='M8.75.75V2h.985c.304 0 .603.08.867.231l1.29.736c.038.022.08.033.124.033h2.234a.75.75 0 0 1 0 1.5h-.427l2.111 4.692a.75.75 0 0 1-.154.838l-.53-.53.529.531-.001.002-.002.002-.006.006-.006.005-.01.01-.045.04c-.21.176-.441.327-.686.45C14.556 10.78 13.88 11 13 11a4.498 4.498 0 0 1-2.023-.454 3.544 3.544 0 0 1-.686-.45l-.045-.04-.016-.015-.006-.006-.004-.004v-.001a.75.75 0 0 1-.154-.838L12.178 4.5h-.162c-.305 0-.604-.079-.868-.231l-1.29-.736a.245.245 0 0 0-.124-.033H8.75V13h2.5a.75.75 0 0 1 0 1.5h-6.5a.75.75 0 0 1 0-1.5h2.5V3.5h-.984a.245.245 0 0 0-.124.033l-1.289.737c-.265.15-.564.23-.869.23h-.162l2.112 4.692a.75.75 0 0 1-.154.838l-.53-.53.529.531-.001.002-.002.002-.006.006-.016.015-.045.04c-.21.176-.441.327-.686.45C4.556 10.78 3.88 11 3 11a4.498 4.498 0 0 1-2.023-.454 3.544 3.544 0 0 1-.686-.45l-.045-.04-.016-.015-.006-.006-.004-.004v-.001a.75.75 0 0 1-.154-.838L2.178 4.5H1.75a.75.75 0 0 1 0-1.5h2.234a.249.249 0 0 0 .125-.033l1.288-.737c.265-.15.564-.23.869-.23h.984V.75a.75.75 0 0 1 1.5 0Zm2.945 8.477c.285.135.718.273 1.305.273s1.02-.138 1.305-.273L13 6.327Zm-10 0c.285.135.718.273 1.305.273s1.02-.138 1.305-.273L3 6.327Z'%3E%3C/path%3E%3C/svg%3E"); }
.typst-content .gc-forks:before { mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' aria-hidden='true' height='16' viewBox='0 0 16 16' version='1.1' width='16'%3E%3Cpath d='M5 5.372v.878c0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75v-.878a2.25 2.25 0 1 1 1.5 0v.878a2.25 2.25 0 0 1-2.25 2.25h-1.5v2.128a2.251 2.251 0 1 1-1.5 0V8.5h-1.5A2.25 2.25 0 0 1 3.5 6.25v-.878a2.25 2.25 0 1 1 1.5 0ZM5 3.25a.75.75 0 1 0-1.5 0 .75.75 0 0 0 1.5 0Zm6.75.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Zm-3 8.75a.75.75 0 1 0-1.5 0 .75.75 0 0 0 1.5 0Z'%3E%3C/path%3E%3C/svg%3E"); }
/* hide language to match original card */
.typst-content .gc-language { display: none; }
.typst-content .github-logo { width: 2rem; height: 2rem; border-radius: 9999px; display:flex; align-items:center; justify-content:center; background: #ffffff; }
.typst-content .github-logo:before {
  content: ""; display: inline-block; width: 1.1rem; height: 1.1rem;
  background-color: #111111;
  mask-size: contain; mask-position: center; mask-repeat: no-repeat;
  mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='31' height='32' viewBox='0 0 496 512'%3E%3Cpath fill='currentColor' d='M165.9 397.4c0 2-2.3 3.6-5.2 3.6c-3.3.3-5.6-1.3-5.6-3.6c0-2 2.3-3.6 5.2-3.6c3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9c2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9c.3 2 2.9 3.3 5.9 2.6c2.9-.7 4.9-2.6 4.6-4.6c-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2c12.8 2.3 17.3-5.6 17.3-12.1c0-6.2-.3-40.4-.3-61.4c0 0-70 15-84.7-29.8c0 0-11.4-29.1-27.8-36.6c0 0-22.9-15.7 1.6-15.4c0 0 24.9 2 38.6 25.8c21.9 38.6 58.6 27.5 72.9 20.9c2.3-16 8.8-27.1 16-33.7c-55.9-6.2-112.3-14.3-112.3-110.5c0-27.5 7.6-41.3 23.6-58.9c-2.6-6.5-11.1-33.3 2.6-67.9c20.9-6.5 69 27 69 27c20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27c13.7 34.7 5.2 61.4 2.6 67.9c16 17.7 25.8 31.5 25.8 58.9c0 96.5-58.9 104.2-114.8 110.5c9.2 7.9 17 22.9 17 46.4c0 33.7-.3 75.4-.3 83.6c0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252C496 113.3 383.5 8 244.8 8'/%3E%3C/svg%3E");
}
/* Explicitly keep the logo light in dark mode */
.dark .typst-content .github-logo { background: #ffffff; }
.dark .typst-content .github-logo:before { background-color: #111111; }
/* Loading state */
.typst-content a.card-github.fetch-waiting { pointer-events:none; opacity:.9; transition: opacity .15s ease-in-out; }
.typst-content a.card-github.fetch-waiting .gc-description,
.typst-content a.card-github.fetch-waiting .gc-infobar,
.typst-content a.card-github.fetch-waiting .gc-avatar { background-color: var(--btn-regular-bg); color: transparent; opacity:.7; animation: pulsate 2s infinite linear; user-select: none; }
.typst-content a.card-github.fetch-waiting .gc-description:before,
.typst-content a.card-github.fetch-waiting .gc-infobar:before,
.typst-content a.card-github.fetch-waiting .gc-avatar:before { background-color: transparent; }
.typst-content a.card-github.fetch-error { pointer-events:all; opacity:1; }
